---
title: Http 权威指南 第六章 代理 笔记
date: 2020-06-03 15:26:51
tags:
---

``` bash
Web 代理(proxy)服务器 是网络的中间实体
```
***关键词*** :  Via首部  TRACE方法  代理认证

![](/images/代理和网关的区别.jpeg)
- 为什么使用代理？
  可以改善安全性，提高性能，节省费用；
  可以监视流过的HTTP流量，并对其进行修改
- 部分代理实例:
  1. 儿童过滤器
  2. 文档访问控制
  3. 安全防火墙
  4. Web 缓存
  5. 反向代理
  6. 内容路由器
  7. 转码器
  8. 匿名者  

***TRACE方法*** : 通过 HTTP/1.1 的 TRACE 方法，观察请求报文经过了哪些代理，以及这些代理是如何修改报文的
***Max-Forwards*** : 剩余最大转发次数，限制 TRACE 和 OPTIONS 请求所经过的跳数
***OPTIONS*** : Allow 首部(服务器或指定资源支持的功能或方法)
#### 代理服务器的部署
- 部署代理服务器的几种方式:
  1. 出口代理
  2. 访问(入口)代理
  3. 反向代理
  4. 网络交换代理
#### 代理是如何获取流量的？
- 四种常见方式可以使客户端流量流向代理:
  1. 修改客户端: 浏览器手工和自动的代理配置
  2. 修改网络: 网络基础设施对流量进行拦截并导入代理
  3. 修改 DNS 的命名空间: 替代物假扮Web服务器的名字和IP地址
  4. 修改 Web服务器: 让 Web服务器 返回一条 Http重定向 命令(状态码 305)，将客户端请求重定向到一个代理上去
#### 客户端的代理设置
- Web浏览器都允许用户对代理的使用进行配置，包括以下几种方式:
  1. 手工配置
  2. 预先配置浏览器
  3. 代理的自动配置(Proxy Auto-Configuration, PAC)
  4. WPAD(Web 代理自动发现协议 Web Proxy Autodiscovery Protocol) 的代理发现